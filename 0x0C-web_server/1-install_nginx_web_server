#!/usr/bin/env bash
# installs nginx server

# Check if script is run as root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root using sudo."
  exit
fi

# Update package list
sudo apt-get update

# Install nginx
sudo apt-get install -y nginx

# Create directory if it doesn't exist
sudo mkdir -p /var/www/html/

# Create a custom HTML file with "Hello World!"
echo "<html><head><title>Hello World!</title></head><body><h1>Hello World!</h1></body></html>" | sudo tee /var/www/html/index.html

# Configure nginx to listen on port 80
sudo sed -i 's/# listen 80;/listen 80;/g' /etc/nginx/sites-available/default

# Restart nginx without systemctl
sudo kill -s HUP $(sudo cat /var/run/nginx.pid)

echo "Nginx installed and configured successfully!"
